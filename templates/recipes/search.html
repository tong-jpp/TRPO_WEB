{% extends 'base.html' %}
{% load static %}
<!-- {% block extra_css %} 
<link rel="stylesheet" href="{% static 'css/forms.css'%}">
{% endblock %} -->

{% block title %}–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ - –ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–º–ø–∞—Å{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <h1 style="text-align: center; margin-bottom: 2rem; color: #ffffff;">üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>
    
    <div class="search-form">
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label class="form-label">{{ form.ingredients.label }}</label>
                {{ form.ingredients }}
                {% if form.ingredients.help_text %}
                    <div class="help-text">{{ form.ingredients.help_text }}</div>
                {% endif %}
                {% if form.ingredients.errors %}
                    <div class="form-errors">
                        {{ form.ingredients.errors }}
                    </div>
                {% endif %}
            </div>
            
            <button type="submit" class="btn" style="width: 100%; padding: 1rem; font-size: 1.1rem; display: flex; justify-content: center;">
                <p>üç≥ –ù–∞–π—Ç–∏ —Ä–µ—Ü–µ–ø—Ç—ã</p>
            </button>
        </form>
    </div>
    
    <div style="margin-top: 2rem; text-align: center;">
        <p style="color: #ffffff;">–ü—Ä–∏–º–µ—Ä—ã: "–ø–æ–º–∏–¥–æ—Ä—ã, –ª—É–∫, —á–µ—Å–Ω–æ–∫, –º–∞—Å–ª–æ" –∏–ª–∏ "–∫—É—Ä–∏—Ü–∞, —Ä–∏—Å, –æ–≤–æ—â–∏"</p>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">

<script>
$(function() {
    $("#id_ingredients").autocomplete({
        source: function(request, response) {
            let terms = request.term.split(",");
            let lastTerm = terms[terms.length - 1].trim();

            $.getJSON("/autocomplete/", { term: lastTerm }, function(data) {
                response(data);
            });
        },
        focus: function() { return false; },
        select: function(event, ui) {
            let terms = this.value.split(",");
            terms.pop();
            terms.push(ui.item.value);
            this.value = terms.join(", ") + ", ";
            return false;
        }
    });
});
</script>

{% endblock %}