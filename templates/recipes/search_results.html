{% extends 'base.html' %}
{% load static %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ - –ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–º–ø–∞—Å{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/recipes.css' %}">
{% endblock %}

{% block content %}
<h1 style="margin-bottom: 1rem; color: #ffffff;">üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h1>

<div class="search-info">
    <p><strong>–ò—Å–∫–∞–ª–∏:</strong> {{ search_ingredients|join:", " }}</p>
    <p><strong>–ù–∞–π–¥–µ–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤:</strong> {{ recipes_data|length }}</p>
</div>

{% if recipes_data %}
    <div class="recipe-grid">
        {% for recipe_data in recipes_data %}
            <div class="recipe-card">
                {% if recipe_data.recipe.image %}
                    <img src="{{ recipe_data.recipe.image.url }}" alt="{{ recipe_data.recipe.title }}" class="recipe-image">
                {% else %}
                    <div style="width: 100%; height: 200px; background: #ecf0f1; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-bottom: 1rem;">
                        <span style="color: #7f8c8d;">üì∑ –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                    </div>
                {% endif %}
                
                <h3 class="recipe-title">
                    <a href="{% url 'recipe_detail' recipe_data.recipe.id %}?from=search"style="color: inherit; text-decoration: none;">
                        {{ recipe_data.recipe.title }}
                    </a>
                </h3>

                <div class="recipe-meta">
                    <div>‚è±Ô∏è {{ recipe_data.recipe.cooking_time }} –º–∏–Ω.</div>
                    <div>üë®‚Äçüç≥ {{ recipe_data.recipe.author.username }}</div>
                    <div style="margin-top: 0.5rem;">
                        <span class="match-percentage">–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: {{ recipe_data.match_percentage|floatformat:0 }}%</span>
                    </div>
                </div>
                
                <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem;">
                    {{ recipe_data.recipe.description|truncatewords:20 }}
                </p>
                
                <a href="{% url 'recipe_detail' recipe_data.recipe.id %}?from=search"
                class="btn" style="width: 100%; text-align: center;">
                    –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ü–µ–ø—Ç
                </a>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <h3>üòî –†–µ—Ü–µ–ø—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ <a href="{% url 'all_recipes' %}">–≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</a></p>
        <a href="{% url 'recipe_search' %}" class="btn" style="margin-top: 1rem;">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</a>
    </div>
{% endif %}
{% if recipes_data %}
    <div class="back-to-search">
        <a href="{% url 'recipe_search' %}" class="btn back-to-search-btn">
            –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∏—Å–∫—É
        </a>
    </div>
{% endif %}

{% endblock %}