{% extends 'base.html' %}
{% load static %}

{% block title %}{{ recipe.title }} - –ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–º–ø–∞—Å{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/recipes.css' %}">
{% endblock %}

{% block content %}
<div class="recipe-detail">
    <div class="recipe-section">
        {% if recipe.image %}
            <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-main-image">
        {% endif %}
        
        <div class="recipe-header">
            <h1>{{ recipe.title }}</h1>
        </div>
        
        <div class="recipe-meta-grid">
            <div class="recipe-meta-item">
                <div>‚è±Ô∏è</div>
                <div><strong>{{ recipe.cooking_time }} –º–∏–Ω.</strong></div>
            </div>
            <div class="recipe-meta-item">
                <div>üë®‚Äçüç≥</div>
                <div><strong>{{ recipe.author.username }}</strong></div>
            </div>
            <div class="recipe-meta-item">
                <div>üìÖ</div>
                <div><strong>{{ recipe.created_at|date:"d.m.Y" }}</strong></div>
            </div>
        </div>
        
        <div class="recipe-section">
            <h3>üìù –û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <p>{{ recipe.description }}</p>
        </div>
        
        <div class="recipe-section">
            <h3>üõí –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h3>
            <ul class="ingredients-list">
                {% for ingredient in recipe.ingredients.all %}
                    <li>‚Ä¢ {{ ingredient.name }}</li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="recipe-section">
            <h3>üë®‚Äçüç≥ –®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</h3>
            <div class="cooking-steps">{{ recipe.cooking_steps }}</div>
        </div>
        
        <div class="recipe-actions">
           {% if source == "all" %}
                <a href="{% url 'all_recipes' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Ü–µ–ø—Ç–∞–º</a>
            {% elif source == "fav" %}
                <a href="{% url 'favorite_recipes' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –∏–∑–±—Ä–∞–Ω–Ω—ã–º —Ä–µ—Ü–µ–ø—Ç–∞–º</a>
            {% elif source == "search" %}
                <a href="{% url 'recipe_search' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–∏—Å–∫—É</a>
            {%else%}
                <a href="{% url 'all_recipes' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Ü–µ–ø—Ç–∞–º</a>

            {% endif %}
            {% if user.is_authenticated %}
                {% if is_favorite %}
                    <a href="{% url 'remove_from_favorites' recipe.id %}" class="btn btn-secondary">üíî –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ</a>
                {% else %}
                    <a href="{% url 'add_to_favorites' recipe.id %}" class="btn">‚ù§Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
                {% endif %}
            {% else %}
                <a href="{% url 'login' %}" class="btn">‚ù§Ô∏è –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}